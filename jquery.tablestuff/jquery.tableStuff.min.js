(function(e){function d(){var i=e("<div></div>");i.css({visibility:"hidden",width:"100px"}).appendTo(e("BODY"));var g=i.width();i.css("overflow","scroll");var f=e("<div></div>");f.css({width:"100%"}).appendTo(i);var h=f.width();i.remove();return g-h}var c={text:function(h,f){var g=e(h).text().toLowerCase();var i=e(f).text().toLowerCase();return g==i?0:(g>i?1:-1)},number:function(g,f){var h=parseFloat(e(g).text());var i=parseFloat(e(f).text());return i-h}};function a(g,i,h,f){return g.sort(function(l,k){var j=0;var n=e(l);var m=e(k);if(e.isFunction(f)){j=f(n.find("TD").get(i),m.find("TD").get(i))}else{if(c[f]!=undefined){j=c[f](n.find("TD").get(i),m.find("TD").get(i))}else{j=c.text(n.find("TD").get(i),m.find("TD").get(i))}}return h?j:(0-j)})}var b={scrollable:{maxHeight:200},sortable:{ascFirst:true,comparers:{},initial:{}}};e.fn.tableStuff=function(g){if(g==undefined){g={}}var h=e.extend(true,{},b,g);var f=d();return this.each(function(){if(this instanceof HTMLTableElement){var n=e(this);var m=n;if(h.scrollable!==false){var j=e("<div><table></table></div>");j.css({"overflow-x":"hidden","overflow-y":"auto","max-height":h.scrollable.maxHeight,width:"100%"}).find("TABLE").css("width","100%");var o=e("<div><table></table></div>");o.find("TABLE").css("width","100%");j.find("TABLE").add(o.find("TABLE")).attr("class",n.attr("class"));var k=e('<div class="table-stuff"></div>');m=k;k.width(n.outerWidth()-f);k.append(j,o).insertAfter(n).prepend(n);n.css("width","100%");n.find("THEAD TR:last-child TH, TBODY TR:first-child TD, TFOOT TR:first-child TD").not(":last-child").each(function(p){var q=p+1;e(this).width(e(this).width())});n.find("THEAD TR:last-child TH:last-child, TFOOT TR:first-child TD:last-child").css("padding-right",f);j.find("TABLE").append(n.find("TBODY"));o.find("TABLE").append(n.find("TFOOT"));k.width(k.width()+f)}if(h.sortable!==false){m.find("THEAD TR:last-child TH").click(function(){var p=e(this).index();var r=e(this).hasClass("asc");var q=e(this).hasClass("desc");var i=r?false:(q?true:h.sortable.ascFirst);m.find("TBODY").append(a(m.find("TBODY > TR"),p,i,h.sortable.comparers[p]));m.find("THEAD TR:last-child TH").removeClass("asc desc");e(this).addClass(i?"asc":"desc")});if(h.sortable.initial.length==2){var l=h.sortable.initial[0];m.find("TBODY").append(a(m.find("TBODY > TR"),l,h.sortable.initial[1],h.sortable.comparers[l]));m.find("THEAD TR:last-child TH").index(l).addClass(dir?"asc":"desc")}}}})}})(jQuery);